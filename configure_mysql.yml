- hosts: localhost
  connection: local
  # user: ansible
  become: True
  tasks:
    # - name: Change the authentication plugin of MySQL root user to mysql_native_password
    #   shell: mysql -u root -e 'UPDATE mysql.user SET plugin="mysql_native_password"
    #     WHERE user="root" AND host="localhost"'
    # - name: Flush Privileges
    #   shell: mysql -u root -e 'FLUSH PRIVILEGES'
    # - name: Set MySQL root password
    #   # mysql_user: ''
    #   # login_host: 'localhost'
    #   user: 'root'
    #   # login_password: ''
    #   # name: 'root'
    #   password: '{{ mysql_pass }}'
    #   state: present

    - include_vars: fufu.yml

    - name: user setup in mysql
      mysql_user:
       user: root
       password: '{{ mysql_pass }}'
       host: localhost
       priv: '*.*:ALL,GRANT'
       login_unix_socket: /var/run/mysqld/mysqld.sock